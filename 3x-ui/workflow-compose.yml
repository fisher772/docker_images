---

services:
  3x-ui:
    image: ${IMAGE}
    container_name: 3xui
    hostname: 3xui
    restart: unless-stopped
    ports:
      - '62222:62222'
      - '62333:62333'
    volumes:
      - db:/etc/x-ui
      - nginx_ssl:/root/cert
      - nginx_conf:/data/nginx/conf
      - nginx_stream:/data/nginx/stream
    environment:
      XRAY_VMESS_AEAD_FORCED: "false"
      LE_FQDN: ${FQDN}
      CONTAINER_ALIAS: ${C_ALIAS}
      SERVER_ALIAS: ${S_ALIAS}
    networks:
      - 3xui
      - nginx

networks:
  3xui:
    external: true
  nginx:
    external: true
    

volumes:
  db:
  nginx_ssl:
    name: nginx_ssl
  nginx_conf:
    name: nginx_conf
  nginx_stream:
    name: nginx_stream
